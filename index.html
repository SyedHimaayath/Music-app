<!DOCTYPE html>
<html>
<head>
	<title>Songify</title>
    <link rel="stylesheet" type="text/css" href="font-awesome.css">
	<link rel="stylesheet" type="text/css" href="main.css">
	<link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Jura" rel="stylesheet">
</head>
<body>
	<div class="wrapper ">
		<section class="cover hidden">
				<h1>Songify</h1><span class="brand-ext">the music box</span>
				<h2> Enter name to access your account </h2>
				<div>
                <input type="text" placeholder="Name" id="name-input">
                <button type="submit" id="go-button"> Go </button></div>
		</section>
			<div class="main ">
		        <header> 
		        <div class="left floated brand"><h1>Songify</h1><span class="brand-ext">the music box</span></div>
		        <div class="right floated user-name">  </div> </header>
		        <section class="content">
		        <audio src="song.mp3"></audio>
                <div class="list-headers">
                    <div> Title </div> 
                    <div> Artist </div>
                    <div> Album </div>
                    <div> Duration </div>
                </div>
                <div class="song-list">
                    <div class="song" id="song1">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song2">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song3">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song4">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                </div>
		        </section>
		        <footer>
                <div class="controls">
                    <div class="player-buttons">
                        <i class="fa fa-repeat clickable backward-icon inactive" title="Repeat" aria-hidden="true"></i>
                        <i class="fa fa-step-backward clickable backward-icon" title="Previous" aria-hidden="true"></i>
                        <i class="fa fa-fast-backward clickable backward-icon" title="Fast-backward" aria-hidden="true"></i>
                        <i class="fa fa-play clickable play-icon" aria-hidden="true"></i>
                        <i class="fa fa-fast-forward clickable forward-icon" title="Fast-forward" aria-hidden="true"></i>
                        <i class="fa fa-step-forward clickable backward-icon" title="Next" aria-hidden="true"></i>
                        <i class="fa fa-random clickable backward-icon inactive" title="Shuffle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="progress-wrapper">
                        <span class="time-elapsed"> </span>
                        <div class="player-progress">
                            <div class="progress-filled"> </div>
                        </div>
                        <span class="song-duration"></span>
                    </div>
            </footer>
		        </div>
	</div>
	<script src="jquery.js"></script>
    <script>
        $('.cover button').on('click', function() {
            var name = $('#name-input').val();
            if(name.length >= 2)
            {
                var message = "Welcome, " + name;
                $('.main .user-name').text(message);
                $('.cover').addClass('hidden');
                $('.main').removeClass('hidden');
            }
            else
            {
                $('#name-input').addClass('error');
                console.log("From else part")
            }
        });

        function toggleSong(){
            var song = document.querySelector('audio');
        if (song.paused == true) {
            $('.play-icon').removeClass('fa-play').addClass('fa-pause');
            song.play();
        } else {
            $('.play-icon').removeClass('fa-pause').addClass('fa-play');
            song.pause();
        }
        }

        $('.play-icon').on('click', function() {
            toggleSong();
        });

        $('body').on('keypress',function(event){
            if(event.keyCode == 32)
            {
                toggleSong();
            }
        });
        
        function fancyTimeFormat(time)
        {   
            // Hours, minutes and seconds
            var hrs = ~~(time / 3600);
            var mins = ~~((time % 3600) / 60);
            var secs = time % 60;

            // Output like "1:01" or "4:03:59" or "123:03:59"
            var ret = "";

            if (hrs > 0) {
                ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
            }

            ret += "" + mins + ":" + (secs < 10 ? "0" : "");
            ret += "" + secs;
            return ret;
        }

        function updateCurrentTime(){
            var song = document.querySelector('audio');
            var currentTime = Math.floor(song.currentTime);
            currentTime = fancyTimeFormat(currentTime);
            var duration = Math.floor(song.duration);
            duration = fancyTimeFormat(duration)
            $('.time-elapsed').text(currentTime);
            $('.song-duration').text(duration);
        }

        window.onload = function() {
            var songlist = ['song1','song2','song3','song4'];
            $('#song1 .song-name').text(songlist[0]);
            $('#song2 .song-name').text(songlist[1]);
            $('#song3 .song-name').text(songlist[2]);
            $('#song4 .song-name').text(songlist[3]);
            updateCurrentTime();
            setInterval(function() {
            updateCurrentTime();
            },1000);
        }

</script>
</body>
</html>