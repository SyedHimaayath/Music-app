<!DOCTYPE html>
<html>
<head>
	<title>Songify</title>
    <link rel="stylesheet" type="text/css" href="font-awesome.css">
	<link rel="stylesheet" type="text/css" href="main.css">
	<link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Jura" rel="stylesheet">
</head>
<body>
	<div class="wrapper ">
		<section class="cover hidden">
				<h1>Songify</h1><span class="brand-ext">the music box</span>
				<h2> Enter name to access your account </h2>
				<div>
                <input type="text" placeholder="Name" id="name-input">
                <button type="submit" id="go-button"> Go </button></div>
		</section>
			<div class="main ">
		        <header> 
    		        <div class="left floated brand"><h1>Songify</h1><span class="brand-ext">the music box</span></div>
    		        <div class="right floated user-name">  </div> 
                </header>
		        <section class="content">
		        <audio src="song1.mp3"></audio>
                <div class="list-headers">
                    <div> Title </div> 
                    <div> Artist </div>
                    <div> Album </div>
                    <div> Duration </div>
                </div>
                <div class="song-list">
                    <div class="song" id="song1">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song2">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song3">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                    <div class="song" id="song4">
                        <span class="song-name"></span>
                        <span class="song-artist"></span>
                        <span class="song-album"></span>
                        <span class="song-length"></span>
                    </div>
                </div>
		        </section>
		        <footer>
                <div class="controls">
                    <div class="player-buttons">
                        <i class="fa fa-repeat clickable backward-icon inactive" title="Repeat" aria-hidden="true"></i>
                        <i class="fa fa-step-backward clickable backward-icon" title="Previous" aria-hidden="true"></i>
                        <i class="fa fa-fast-backward clickable backward-icon" title="Fast-backward" aria-hidden="true"></i>
                        <i class="fa fa-play clickable play-icon" aria-hidden="true"></i>
                        <i class="fa fa-fast-forward clickable forward-icon" title="Fast-forward" aria-hidden="true"></i>
                        <i class="fa fa-step-forward clickable backward-icon" title="Next" aria-hidden="true"></i>
                        <i class="fa fa-random clickable backward-icon inactive" title="Shuffle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="progress-wrapper">
                        <span class="time-elapsed"> </span>
                        <div class="player-progress">
                            <div class="progress-filled"> </div>
                        </div>
                        <span class="song-duration"></span>
                    </div>
            </footer>
		        </div>
	</div>
	<script src="jquery.js"></script>
    <script>
        $('.cover button').on('click', function() {
            var name = $('#name-input').val();
            if(name.length >= 2)//user gets access only if username input value is greater than or equal to 2 
            {
                var message = "Welcome, " + name;
                $('.main .user-name').text(message);
                $('.cover').addClass('hidden');
                $('.main').removeClass('hidden');
            }
            else
            {
                $('#name-input').addClass('error');
                console.log("From else part")
            }
        });

        //function to manage the play and pause interface using the fontawesome icons
        function toggleSong(){
            var song = document.querySelector('audio');
        if (song.paused == true) {
            $('.play-icon').removeClass('fa-play').addClass('fa-pause');//removes play icon and adds pause icon
            song.play();
        } else {
            $('.play-icon').removeClass('fa-pause').addClass('fa-play');//removes pause icon and adds play icon
            song.pause();
        }
        }

        $('.play-icon').on('click', function() {
            toggleSong();
        });

        //function to manage the play and pause functionality using the spacebar(keyboard keys)
        $('body').on('keypress',function(event){
            if(event.keyCode == 32) //spacebar key holds value 32
            {
                toggleSong();
            }
        });
        
        function fancyTimeFormat(time)
        {   
            // Hours, minutes and seconds
            var hrs = ~~(time / 3600);
            var mins = ~~((time % 3600) / 60);
            var secs = time % 60;

            // Output like "1:01" or "4:03:59" or "123:03:59"
            var ret = "";

            if (hrs > 0) {
                ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
            }

            ret += "" + mins + ":" + (secs < 10 ? "0" : "");
            ret += "" + secs;
            return ret;
        }

        //updates the current time and the duration of the songs.
        function updateCurrentTime(){ 
            var song = document.querySelector('audio');
            var currentTime = Math.floor(song.currentTime);
            // uses the function fancyTimeFormat to convert the current time seconds to minutes
            currentTime = fancyTimeFormat(currentTime);
            var duration = Math.floor(song.duration);
            // uses the function fancyTimeFormat to convert the duration seconds to minutes
            duration = fancyTimeFormat(duration)
            $('.time-elapsed').text(currentTime);
            $('.song-duration').text(duration);
        }

        //does the stipulated functions after the window is loaded
        window.onload = function() {
            var songlist = ['Why not me','Jaaniya','Aye dil bata','Safarnama']; //Listing the songs using array
            var fileNames = ['song1.mp3','song2.mp3','song3.mp3','song4.mp3'];  //Listing the songs to add to the audio source
            $('#song1 .song-name').text(songlist[0]);
            $('#song2 .song-name').text(songlist[1]);
            $('#song3 .song-name').text(songlist[2]);
            $('#song4 .song-name').text(songlist[3]);

            //when song1 is selcted this function works
            $('#song1').click(function() {
            var audio = document.querySelector('audio');
            var currentSong = audio.src;
            //we check wether the song being palyed is as same as the song being requested(song1)
            if(currentSong.search(fileNames[0]) != -1)
            {
            toggleSong();
            }
            else {
            audio.src = fileNames[0];
            toggleSong();
            }
            });

            $('#song2').click(function() {
            var audio = document.querySelector('audio');
            var currentSong = audio.src;
            //we check wether the song being palyed is as same as the song being requested(song2)
            if(currentSong.search(fileNames[1]) != -1)
            {
            toggleSong();
            }
            else {
            audio.src = fileNames[1];
            toggleSong();
            }
            });

            $('#song3').click(function() {
            var audio = document.querySelector('audio');
            var currentSong = audio.src;
            //we check wether the song being palyed is as same as the song being requested(song3)
            if(currentSong.search(fileNames[2]) != -1)
            {
            toggleSong();
            }
            else {
            audio.src = fileNames[2];
            toggleSong();
            }
            });

            $('#song4').click(function() {
            var audio = document.querySelector('audio');
            var currentSong = audio.src;
            //we check wether the song being palyed is as same as the song being requested(song4)
            if(currentSong.search(fileNames[3]) != -1)
            {
            toggleSong();
            }
            else {
            audio.src = fileNames[3];
            toggleSong();
            }
            });

            //checks and changes the time for every 1 second
            updateCurrentTime();
            setInterval(function() {
            updateCurrentTime();
            },1000); //1000 represents time in milliseconds
        }

</script>
</body>
</html>